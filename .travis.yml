language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: FcKIYlVMxbe55gBAuHvI4yTvI+dinDL/kth6cQ8euCDEQh0wY2vYdikEMOCCM1iJ5Ks0TzsAazh/IJSIJ5fwtITIXn1PKpOMl5n5U9nPX8TORYijnQvE8iHYLGWQRSCoXrPU/kwDxgz6+vmuvRfQhvgdRVpQfkPt+SFMo88y/Px9s7sJwEYjL5Mc+tbYpUWoUiRkPJaPBpIW2A1vQ56bo3tOrfDSE/dRveJG5glVCXd+8A2aYWrg1Zf2hz/pT7IzkS7iZhI8SrjsRKDAU6YXc7ZxfPAxsbsvi3StoQASvpfATiAfMr5EgqD2PEBLXS1x+j5PchtQetHcJMlZGp5ZwFigz0mVKdNLdCmJSe50suYH/myAHJtvtqPv5feghJw6gbZ+rreCFLcy+SmuECGBp1sCVlJa6CL8ua5MriAurwx7NDJdL9AnxTpZFop9pte7V81FuF0CJ+XUWE+kdxoC0iSY490UKs1YTuZ7vUiqLNeihDeBZgc8UA8BzWirwJfG/cqCNCbgxfQ9UvpuorJGc7XodPmpZext4F6jhg/x0Xw6U4/7odyYrQTiFVqGi2HdKEwtQAm2PO0+a6x1awQOCogY7fBDE5ujzULMsWhG9jy6gF4qYUS0c+f8muoFXXCps2FZ9VF04Ri4S8a9QOPg6JriiDkORleuTuAhsQmAN1o=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
